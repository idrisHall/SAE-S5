import{d as i,c as p,a as s,e as u,f as c,v as m,t as _,l as w,b as y,w as b,m as V,h as v,G as k,k as S,i as x,j as C,n as z,s as E,r as G,o as g,u as I}from"./index-BCYLosDA.js";import{_ as N}from"./fondLetter-DdOmRNGz.js";const P={class:"container"},D={class:"main-content"},M={class:"form-container"},A={method:"POST"},B={class:"form-group"},T={key:0},U={class:"form-group"},W={class:"login-link"},j={__name:"Login",setup(q){const n=i(""),r=i(""),o=i(""),d=I(),f=l=>{if(l.preventDefault(),!n.value&&!r.value){o.value="Veuillez compléter tous les champs";return}if(!n.value){o.value="Veuillez entrer une adresse mail valide.";return}if(!r.value){o.value="Veuillez entrer votre mot de passe.";return}V(v,n.value,r.value).then(e=>{console.log("Successfully signed in !"),d.push("/game")}).catch(e=>{console.error(e.code),e.code==="auth/invalid-credential"?o.value="Email ou mot de passe incorrect":o.value="Une erreur est survenue. Veuillez réessayer."})},h=()=>{const l=new k;S(v,l).then(async e=>{const t=e.user,a=x(C,`users/${t.uid}`);(await z(a)).exists()||await E(a,{email:t.email,pseudo:t.displayName||"Pseudo par défaut",createdAt:new Date().toISOString()}),console.log("Google Sign-In successful!",t),d.push("/game")}).catch(e=>{console.error("Erreur lors de la connexion :",e.code,e.message),alert(e.message)})};return(l,e)=>{const t=G("router-link");return g(),p("div",P,[e[6]||(e[6]=s("video",{autoplay:"",muted:"",loop:"",playsinline:"",class:"background-video"},[s("source",{src:N,type:"video/mp4"}),u(" Your browser does not support the video tag. ")],-1)),e[7]||(e[7]=s("header",{class:"header"},[s("h1",{class:"title"},"Connexion")],-1)),s("main",D,[s("div",M,[s("form",A,[s("div",B,[e[2]||(e[2]=s("label",{for:"email"},"Email",-1)),c(s("input",{id:"email",type:"email",name:"email","onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),required:""},null,512),[[m,n.value]]),o.value?(g(),p("p",T,_(o.value),1)):w("",!0)]),s("div",U,[e[3]||(e[3]=s("label",{for:"password"},"Mot de passe",-1)),c(s("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),required:""},null,512),[[m,r.value]])]),s("button",{onClick:f,class:"submit-button",type:"submit"},"Me connecter")]),s("div",W,[s("p",null,[s("button",{onClick:h},"Se connecter avec Google")]),s("p",null,[e[5]||(e[5]=u("Vous n'avez pas de compte ? ")),y(t,{to:"/register"},{default:b(()=>e[4]||(e[4]=[u("S'inscrire")])),_:1})])])])])])}}};export{j as default};
